apply Dependency "switching" to Service {
  parent_host_name = host.vars.network_parent_host
  parent_service_name = "ping4"
  disable_checks = true

  assign where host.vars.network_parent_port
}

apply Service for (interface => config in host.vars.snmp_interfaces) {
  import "generic-service"

  display_name = "Network traffic on " + config.snmp_interface_label
  check_command = "snmp-interface"

  vars.snmp_interface_ifname = "true"
  vars.snmp_interface_noregexp = "true"
  vars.snmp_warn = "100,100"
  vars.snmp_crit = "100,100"
  vars += config

  assign where host.vars.snmp_community
}

template Host "int-24-ports-template" {

  vars.snmp_interfaces["snmp-int-port1"] = {
    snmp_interface = "1"
    snmp_interface_label = "port 01"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port2"] = {
    snmp_interface = "2"
    snmp_interface_label = "port 02"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port3"] = {
    snmp_interface = "3"
    snmp_interface_label = "port 03"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port4"] = {
    snmp_interface = "4"
    snmp_interface_label = "port 04"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port5"] = {
    snmp_interface = "5"
    snmp_interface_label = "port 05"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port6"] = {
    snmp_interface = "6"
    snmp_interface_label = "port 06"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port7"] = {
    snmp_interface = "7"
    snmp_interface_label = "port 07"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port8"] = {
    snmp_interface = "8"
    snmp_interface_label = "port 08"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port9"] = {
    snmp_interface = "9"
    snmp_interface_label = "port 09"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port10"] = {
    snmp_interface = "10"
    snmp_interface_label = "port 10"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port11"] = {
    snmp_interface = "11"
    snmp_interface_label = "port 11"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port12"] = {
    snmp_interface = "12"
    snmp_interface_label = "port 12"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port13"] = {
    snmp_interface = "13"
    snmp_interface_label = "port 13"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port14"] = {
    snmp_interface = "14"
    snmp_interface_label = "port 14"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port15"] = {
    snmp_interface = "15"
    snmp_interface_label = "port 15"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port16"] = {
    snmp_interface = "16"
    snmp_interface_label = "port 16"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port17"] = {
    snmp_interface = "17"
    snmp_interface_label = "port 17"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port18"] = {
    snmp_interface = "18"
    snmp_interface_label = "port 18"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port19"] = {
    snmp_interface = "19"
    snmp_interface_label = "port 19"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port20"] = {
    snmp_interface = "20"
    snmp_interface_label = "port 20"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port21"] = {
    snmp_interface = "21"
    snmp_interface_label = "port 21"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port22"] = {
    snmp_interface = "22"
    snmp_interface_label = "port 22"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port23"] = {
    snmp_interface = "23"
    snmp_interface_label = "port 23"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port24"] = {
    snmp_interface = "24"
    snmp_interface_label = "port 24"
    grafana_graph_disable = true
  }
}

template Host "int-26-ports-template" {
  import "int-24-ports-template"

  vars.snmp_interfaces["snmp-int-port25"] = {
    snmp_interface = "25"
    snmp_interface_label = "port 25"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port26"] = {
    snmp_interface = "26"
    snmp_interface_label = "port 26"
    grafana_graph_disable = true
  }
}

template Host "int-28-ports-template" {
  import "int-24-ports-template"

  vars.snmp_interfaces["snmp-int-port25"] = {
    snmp_interface = "25"
    snmp_interface_label = "port 25"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port26"] = {
    snmp_interface = "26"
    snmp_interface_label = "port 26"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port27"] = {
    snmp_interface = "27"
    snmp_interface_label = "port 27"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port28"] = {
    snmp_interface = "28"
    snmp_interface_label = "port 28"
    grafana_graph_disable = true
  }
}

template Host "int-48-ports-template" {
  import "int-24-ports-template"

  vars.snmp_interfaces["snmp-int-port25"] = {
    snmp_interface = "25"
    snmp_interface_label = "port 25"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port26"] = {
    snmp_interface = "26"
    snmp_interface_label = "port 26"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port27"] = {
    snmp_interface = "27"
    snmp_interface_label = "port 27"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port28"] = {
    snmp_interface = "28"
    snmp_interface_label = "port 28"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port29"] = {
    snmp_interface = "29"
    snmp_interface_label = "port 29"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port30"] = {
    snmp_interface = "30"
    snmp_interface_label = "port 30"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port31"] = {
    snmp_interface = "31"
    snmp_interface_label = "port 31"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port32"] = {
    snmp_interface = "32"
    snmp_interface_label = "port 32"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port33"] = {
    snmp_interface = "33"
    snmp_interface_label = "port 33"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port34"] = {
    snmp_interface = "34"
    snmp_interface_label = "port 34"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port35"] = {
    snmp_interface = "35"
    snmp_interface_label = "port 35"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port36"] = {
    snmp_interface = "36"
    snmp_interface_label = "port 36"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port37"] = {
    snmp_interface = "37"
    snmp_interface_label = "port 37"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port38"] = {
    snmp_interface = "38"
    snmp_interface_label = "port 38"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port39"] = {
    snmp_interface = "39"
    snmp_interface_label = "port 39"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port40"] = {
    snmp_interface = "40"
    snmp_interface_label = "port 40"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port41"] = {
    snmp_interface = "41"
    snmp_interface_label = "port 41"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port42"] = {
    snmp_interface = "42"
    snmp_interface_label = "port 42"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port43"] = {
    snmp_interface = "43"
    snmp_interface_label = "port 43"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port44"] = {
    snmp_interface = "44"
    snmp_interface_label = "port 44"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port45"] = {
    snmp_interface = "45"
    snmp_interface_label = "port 45"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port46"] = {
    snmp_interface = "46"
    snmp_interface_label = "port 46"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port47"] = {
    snmp_interface = "47"
    snmp_interface_label = "port 47"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port48"] = {
    snmp_interface = "48"
    snmp_interface_label = "port 48"
    grafana_graph_disable = true
  }
}

template Host "int-50-ports-template" {
  import "int-48-ports-template"

  vars.snmp_interfaces["snmp-int-port49"] = {
    snmp_interface = "49"
    snmp_interface_label = "port 49"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port50"] = {
    snmp_interface = "50"
    snmp_interface_label = "port 50"
    grafana_graph_disable = true
  }
}

template Host "int-52-ports-template" {
  import "int-48-ports-template"

  vars.snmp_interfaces["snmp-int-port49"] = {
    snmp_interface = "49"
    snmp_interface_label = "port 49"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port50"] = {
    snmp_interface = "50"
    snmp_interface_label = "port 50"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port51"] = {
    snmp_interface = "51"
    snmp_interface_label = "port 51"
    grafana_graph_disable = true
  }

  vars.snmp_interfaces["snmp-int-port52"] = {
    snmp_interface = "52"
    snmp_interface_label = "port 52"
    grafana_graph_disable = true
  }
}

